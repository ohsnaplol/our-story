<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Our story</title>
		<link rel="stylesheet" href="style.css">
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
		<script src="js/three.js" defer></script>
		<script type="module" src="js/scene.js" defer></script>
		<script src="js/console.js"></script>
	</head>
	<body>
		<div id="container">
			<main id="hud" x-data="reactiveLines">
				<ol id="scrolling-text-wrapper">
					<template id="scrolling-text" x-for="line in lines">
						<!-- Thanks to allain on Alpine.js Discord -->
						<li>
							<template x-for="token of lineTokens">
								<span>
									<template x-if="token.type === 'choice'">
										<select @change="line.choices[token.name] = $event.target.value">
											<option>--Choose--</option>
											<template x-for="option of token.options">
												<option :value="option" x-text="option"></option>
											</template>
										</select>
									</template>
									<template x-if="token.type === 'text'">
										<span x-text="token.text"></span>
									</template>
								</span>
							</template>
						</li>
					</template>
				</ol>
				<form @submit.prevent="submitInput">
					<input autocomplete="off" type="text" id="text-input" x-model="playerInput" placeholder="Enter text here">
					<button type="submit" id="submit" x-show="buttonShow" x-bind:disabled="buttonEnabled" x-transition>Submit</button>
				</form>
			</main>
		</div>
	</body>
</html>